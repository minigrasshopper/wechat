!function(n,e){"function"==typeof define&&define.amd?define(["wx"],function(i){return e(i,n)}):"undefined"!=typeof module&&module.exports?module.exports=e(require("wx"),require("oAuth"),require("ngapi"),n):n.ngapi=e(n.wx,n.oAuth,n.ngapi,n)}("undefined"!=typeof window?window:this,function(n,e){var i=e.wxshare={times:0,wxconfig:null,initWx:function(n,i,t,o,r,c,u,s){var f=this;0==f.times?M.ajax("jscfg",{url:e.location.href},i,function(e){var i=parseInt(e.error);0==i?(f.times++,f.wxconfig=e.cfg,f.initWxCfg(n,f.wxconfig,r,c,u,s)):alert(e.error_msg)},t,o):f.initWxCfg(n,f.wxconfig,r,c,u,s)},initWxCfg:function(e,i,t,o,r,c){n.config({appId:i.appId,timestamp:i.timestamp,nonceStr:i.nonceStr,signature:i.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideOptionMenu","showOptionMenu"]}),n.ready(function(){c&&c(),n.onMenuShareAppMessage({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){t&&t()},cancel:function(){o&&o()}}),n.onMenuShareTimeline({title:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){t&&t()},cancel:function(){o&&o()}}),n.onMenuShareQQ({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){t&&t()},cancel:function(){o&&o()}}),n.onMenuShareWeibo({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl,success:function(){t&&t()},cancel:function(){o&&o()}})}),n.error(function(n){r&&r(JSON.stringify(n))})}};return i});