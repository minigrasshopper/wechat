!function(){function e(e){function i(e){var i=e.error-0;switch(M.loadingHide(),i){case 1002:oAuth.clear(),changeAlert("你的身份信息已过期，点击确定刷新页面"),window.location.reload();break;default:changeAlert(e.error_msg)}}function a(e,a,n){M.ajax(e,a,config.gameid,function(e){var a=e.error-0;switch(a){case 0:n&&n(e);break;default:i(e)}},config.apiopenid,config.apitoken,config.isDebug?"nf":"")}function n(i,a){switch(localStorage.language){case"cn":break;case"en":languagePack[config.shareInfo.title]&&(config.shareInfo.title=languagePack[config.shareInfo.title]),languagePack[config.shareInfo.desc]&&(config.shareInfo.desc=languagePack[config.shareInfo.desc])}e.initWx(i,config.gameid,config.apiopenid,config.apitoken,a,null,null,null)}var t={address:function(e){a("mall/i/address/list",{},function(i){e&&e(i)})},update:function(e,i){a("mall/i/address/update",e,function(e){i&&i(e)})},del:function(e,i){a("mall/i/address/del",{id:e},function(e){i&&i(e)})}};new Vue({el:"section",data:{pageData:[],showAll:1==localStorage.showAll?1:0,order:getUrlParam().order?JSON.parse(getUrlParam().order):null},mounted:function(){var e=this;M.loading(),check(oAuth,function(){e.init()})},updated:function(){changeLanguage(),nameFontChange()},methods:{init:function(){var e=this;this.$el.style.display="block",t.address(function(i){e.addressFilter(i.list),console.log(i.list),changeLanguage(),nameFontChange(),e.setOnlyDefault(),M.loadingHide(),n(config.shareInfo)})},addressFilter:function(e){var i=this;this.pageData=[],console.log(this.showAll),1==this.showAll?$.each(e,function(e,a){("北京"==a.city||"Beijing"==a.city)&&i.pageData.push(a)}):$.each(e,function(e,a){console.log(i.pageData),"北京"!=a.city&&"Beijing"!=a.city&&i.pageData.push(a)})},jumpOrderCreate:function(e){var i=this;return this.order?1==e.is_default?(gotoUrl("order-create.html?order="+JSON.stringify(this.order)),!1):(M.loading(),$(".selected").hide(),e.is_default=1,void t.update(e,function(){M.loadingHide(),gotoUrl("order-create.html?order="+JSON.stringify(i.order))})):!1},setOnlyDefault:function(){if(this.pageData.length&&1!=this.pageData[0].is_default){M.loading();var e=this.pageData[0];e.is_default=1,t.update(e,function(){M.loadingHide()})}},jumpNew:function(e){switch(e){case"profile":gotoUrl("profile.html");break;case"order-create":gotoUrl("order-create.html?order="+JSON.stringify(this.order))}},jumpAddressEdit:function(e){gotoUrl(e?"address-edit.html?order="+JSON.stringify(this.order)+"&address="+JSON.stringify(e):"address-edit.html?order="+JSON.stringify(this.order))},deleteHandle:function(e){var i=this;M.loading(),t.del(e,function(){t.address(function(e){M.loadingHide(),i.addressFilter(e.list),i.setOnlyDefault()})})}}})}require([config.configUrl],function(){var i=["wxshare"];require(i,e)})}();