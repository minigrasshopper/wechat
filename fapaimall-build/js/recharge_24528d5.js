!function(){function a(a){function e(a){var e=a.error-0;switch(M.loadingHide(),e){case 1002:oAuth.clear(),changeAlert("你的身份信息已过期，点击确定刷新页面"),window.location.reload();break;default:changeAlert(a.error_msg)}}function n(a,n,i){M.ajax(a,n,config.gameid,function(a){var n=a.error-0;switch(n){case 0:i&&i(a);break;default:e(a)}},config.apiopenid,config.apitoken,config.isDebug?"nf":"")}function i(e,n){switch(localStorage.language){case"cn":break;case"en":languagePack[config.shareInfo.title]&&(config.shareInfo.title=languagePack[config.shareInfo.title]),languagePack[config.shareInfo.desc]&&(config.shareInfo.desc=languagePack[config.shareInfo.desc])}a.initWx(e,config.gameid,config.apiopenid,config.apitoken,n,null,null,null)}amendPageStyle();var t={rechargeList:function(a){n("member/recharge",{},function(e){a&&a(e)})},cardRecharge:function(a,e){n("mall/coupon/recharge",a,function(a){e&&e(a)})},getjsapiparams:function(a,e){n("wxpay/getjsapiparams",a,function(a){e&&e(a)})}};new Vue({el:"section",data:{pageData:[],params:{channel:"letwxmember",money:0,type:2,shopid:0},card_params:{couponNo:null},type:1},mounted:function(){var a=this;M.loading(),check(oAuth,function(){a.init()})},updated:function(){changeLanguage(),nameFontChange()},methods:{init:function(){var a=this;this.$el.style.display="block",t.rechargeList(function(e){a.pageData=e.data,console.log(a.pageData),changeLanguage(),nameFontChange(),M.loadingHide(),i(config.shareInfo)})},toggleType:function(a){this.type=a},selectHandle:function(a,e){var n=e.currentTarget;$(n).parents("ul").find("li.active").removeClass("active"),$(n).addClass("active"),this.params.money=a},getjsapiparamsCb:function(a){function e(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.params.appId,timeStamp:a.params.timeStamp,nonceStr:a.params.nonceStr,"package":a.params.package,signType:a.params.signType,paySign:a.params.paySign},function(a){"get_brand_wcpay_request:ok"==a.err_msg?(M.loadingHide(),changeAlert("充值成功")):"get_brand_wcpay_request:cancel"==a.err_msg&&M.loadingHide()})}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)):e()},sureHandle:function(){var a=this;return 0==this.params.money?(changeAlert("请选择套餐"),!1):(M.loading(),void t.getjsapiparams(this.params,function(e){a.getjsapiparamsCb(e)}))},sureHandle1:function(){var a=this;return this.card_params.couponNo?(M.loading(),void t.cardRecharge(this.card_params,function(){M.loadingHide(),changeAlert("充值成功"),a.card_params.couponNo=null})):(changeAlert("请输入券码"),!1)}}})}require([config.configUrl],function(){var e=["wxshare"];require(e,a)})}();