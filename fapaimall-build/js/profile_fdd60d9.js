!function(){function t(t){function a(t){var a=t.error-0;switch(M.loadingHide(),a){case 1002:oAuth.clear(),changeAlert("你的身份信息已过期，点击确定刷新页面"),window.location.reload();break;default:changeAlert(t.error_msg)}}function e(t,e,n){M.ajax(t,e,config.gameid,function(t){var e=t.error-0;switch(e){case 0:n&&n(t);break;default:a(t)}},config.apiopenid,config.apitoken,config.isDebug?"nf":"")}function n(a,e){switch(a.link=config.htmlUrl+"index.html?channelid="+sessionStorage.getItem("channelid"),localStorage.language){case"cn":break;case"en":languagePack[config.shareInfo.title]&&(config.shareInfo.title=languagePack[config.shareInfo.title]),languagePack[config.shareInfo.desc]&&(config.shareInfo.desc=languagePack[config.shareInfo.desc])}t.initWx(a,config.gameid,config.apiopenid,config.apitoken,e,null,null,null)}amendPageStyle();var o={account:function(t){e("mall/i/account/info",{},function(a){t&&t(a)})},goodsCate:function(t){e("mall/goods/cate",{},function(a){t&&t(a)})},orderList:function(t){e("mall/order/list",{},function(a){t&&t(a)})}};new Vue({el:"section",data:{pageData:null,showAll:"1"==localStorage.showAll?1:0,stateList:{unpaid:0,unshipped:0,shipped:0,completed:0},params:{goodsId:getUrlParam().id,num:1},cartNum:localStorage.cartNum?localStorage.cartNum:null,cateArr:sessionStorage.getItem("cateArr")?JSON.parse(sessionStorage.getItem("cateArr")):null},mounted:function(){var t=this;M.loading(),check(oAuth,function(){t.init()})},updated:function(){changeLanguage(),nameFontChange()},methods:{init:function(){var t=this;this.$el.style.display="block",o.account(function(a){t.pageData=a,console.log(t.pageData),o.orderList(function(a){console.log(a),t.getStateNum(a.list),t.cartNum?t.cateArr?n(config.shareInfo):(M.loading(),o.goodsCate(function(a){t.cateArr=a.cates,sessionStorage.setItem("cateArr",JSON.stringify(t.cateArr)),console.log(t.cateArr),M.loadingHide(),t.cartNum?n(config.shareInfo):(M.loading(),getCartNum("mall/cart/list",{},function(a){t.cartNum=a.length,localStorage.cartNum=t.cartNum,M.loadingHide(),n(config.shareInfo)}))})):(M.loading(),getCartNum("mall/cart/list",{},function(a){t.cartNum=a.length,localStorage.cartNum=t.cartNum,M.loadingHide(),t.cateArr?n(config.shareInfo):(M.loading(),o.goodsCate(function(a){t.cateArr=a.cates,sessionStorage.setItem("cateArr",JSON.stringify(t.cateArr)),console.log(t.cateArr),M.loadingHide(),n(config.shareInfo)}))})),changeLanguage(),nameFontChange(),M.loadingHide()})})},jumpAddress:function(){gotoUrl("address.html")},getStateNum:function(t){var a=this;$.each(t,function(t,e){switch(e.status){case"unpaid":a.stateList[e.status]++;break;case"unshipped":a.stateList[e.status]++;break;case"shipped":a.stateList[e.status]++;break;case"completed":a.stateList[e.status]++}})},jumpOrderList:function(t){gotoUrl(t?"order-list.html?status="+t:"order-list.html")},jumpRemain:function(){gotoUrl("remain.html")},jumpRecharge:function(){gotoUrl("recharge.html")},jumpCoupon:function(){gotoUrl("coupon.html")}}})}require([config.configUrl],function(){var a=["wxshare"];require(a,t)})}();