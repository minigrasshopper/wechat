!function(){function n(n){function o(n){var o=n.error-0;switch(M.loadingHide(),o){case 1002:oAuth.clear(),changeAlert("你的身份信息已过期，点击确定刷新页面"),window.location.reload();break;default:changeAlert(n.error_msg)}}function e(n,e,a){M.ajax(n,e,config.gameid,function(n){var e=n.error-0;switch(e){case 0:a&&a(n);break;default:o(n)}},config.apiopenid,config.apitoken,config.isDebug?"nf":"")}function a(o,e){switch(localStorage.language){case"cn":break;case"en":languagePack[config.shareInfo.title]&&(config.shareInfo.title=languagePack[config.shareInfo.title]),languagePack[config.shareInfo.desc]&&(config.shareInfo.desc=languagePack[config.shareInfo.desc])}n.initWx(o,config.gameid,config.apiopenid,config.apitoken,e,null,null,null)}amendPageStyle();var i={couponList:function(n){e("mall/coupon/my",{},function(o){n&&n(o)})},exchange:function(n,o){e("mall/coupon/exchange",n,function(n){o&&o(n)})}};new Vue({el:"section",data:{pageData:null,inputBoxShow:0,params:{couponNo:null},order:JSON.parse(getUrlParam().order)},mounted:function(){var n=this;M.loading(),check(oAuth,function(){n.init()})},updated:function(){changeLanguage(),nameFontChange()},methods:{init:function(){var n=this;this.$el.style.display="block",i.couponList(function(o){n.pageData=o.list.canuse,console.log(n.pageData),changeLanguage(),nameFontChange(),M.loadingHide(),a(config.shareInfo)})},toggleHandle:function(n){var o=n.currentTarget;$(o).parent("ul").find(".selected").removeClass("selected"),$(o).addClass("selected")},selectHandle:function(n,o){var e=n.currentTarget;$(e).siblings("li").find(".show").removeClass("show");var a=$(e).find("img").hasClass("show")?1:0;a?($(e).find("img").removeClass("show"),this.order.withcoupon=0,this.order.couponlogid=null,this.order.couponQname="无可用",this.order.money=0):($(e).find("img").addClass("show"),this.order.withcoupon=1,this.order.couponlogid=o.couponlogid,this.order.couponNo=o.couponNo,this.order.couponQname=o.qname,this.order.money=o.money)},jumpNew:function(){gotoUrl("order-create.html?order="+JSON.stringify(this.order))},jumpOrderCreate:function(){gotoUrl("order-create.html?order="+JSON.stringify(this.order))},addHandle:function(){this.inputBoxShow=1},sureHandle:function(){var n=this;return $.each(this.params,function(o,e){n.params[o]=$.trim(e)}),this.params.couponNo?(M.loading(),void i.exchange(this.params,function(){n.inputBoxShow=0,n.params.couponNo="",i.couponList(function(o){n.pageData=o,M.loadingHide()})})):(changeAlert("请输入兑换券码"),!1)},cancelHandle:function(){this.inputBoxShow=0}}})}require([config.configUrl],function(){var o=["wxshare"];require(o,n)})}();