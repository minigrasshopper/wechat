!function(){function e(e){function n(e){var n=e.error-0;switch(M.loadingHide(),n){case 1002:oAuth.clear(),changeAlert("你的身份信息已过期，点击确定刷新页面"),window.location.reload();break;default:changeAlert(e.error_msg)}}function a(e,a,i){M.ajax(e,a,config.gameid,function(e){var a=e.error-0;switch(a){case 0:i&&i(e);break;default:n(e)}},config.apiopenid,config.apitoken,config.isDebug?"nf":"")}function i(n,a){switch(n.link=config.htmlUrl+"index.html?channelid="+sessionStorage.getItem("channelid"),localStorage.language){case"cn":break;case"en":languagePack[config.shareInfo.title]&&(config.shareInfo.title=languagePack[config.shareInfo.title]),languagePack[config.shareInfo.desc]&&(config.shareInfo.desc=languagePack[config.shareInfo.desc])}e.initWx(n,config.gameid,config.apiopenid,config.apitoken,a,null,null,null)}var t={create:function(e,n){a("mall/i/invoice/create",e,function(e){n&&n(e)})},update:function(e,n){a("mall/i/invoice/update",e,function(e){n&&n(e)})}};new Vue({el:"section",data:{order:getUrlParam().order?JSON.parse(getUrlParam().order):null,params:getUrlParam().invoice?JSON.parse(getUrlParam().invoice):{type:"normal",user_type:"customer",user_title:"",company_name:"",company_unit:"",company_address:"",company_tel:"",company_bank:"",company_bank_info:"",content:1,is_default:1}},mounted:function(){var e=this;M.loading(),check(oAuth,function(){e.init()})},updated:function(){changeLanguage(),nameFontChange()},methods:{init:function(){this.$el.style.display="block",changeLanguage(),nameFontChange(),M.loadingHide(),i(config.shareInfo)},jumpNew:function(){gotoUrl("order-create.html?order="+JSON.stringify(this.order))},typeHandle:function(e){this.params.type=e},userTypeHandle:function(e){this.params.user_type=e},contentHandle:function(e){this.params.content=e},sureHandle:function(){var e=this;if($.each(this.params,function(n,a){e.params[n]=$.trim(a)}),"normal"==this.params.type&&"company"==this.params.user_type){if(!this.params.user_title)return void changeAlert("请输入单位名称");if(!this.params.company_unit)return void changeAlert("请输入纳税人识别码")}else if("special"==this.params.type){if(!this.params.company_name)return void changeAlert("请输入单位名称");if(!this.params.company_unit)return void changeAlert("请输入纳税人识别码");if(!this.params.company_address)return void changeAlert("请输入注册地址");if(!testTel(this.params.company_tel))return;if(!this.params.company_bank)return void changeAlert("请输入开户银行");if(!this.params.company_bank_info)return void changeAlert("请输入银行账户")}M.loading(),this.params.id?t.update(this.params,function(){M.loadingHide(),gotoUrl("order-create.html?order="+JSON.stringify(e.order))}):t.create(this.params,function(){M.loadingHide(),gotoUrl("order-create.html?order="+JSON.stringify(e.order))})}}})}require([config.configUrl],function(){var n=["wxshare"];require(n,e)})}();